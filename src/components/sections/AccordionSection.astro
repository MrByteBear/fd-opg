---
import PlusIcon from "@icons/plus.svg";
import faqData from "@data/faq.json";
---

<section class="accordion-container">
  <header>
    <span>{faqData.title}</span>
    <h2>{faqData.heading}</h2>
  </header>
  <div class="faqWrapper">
    <div class="faqContainer">
       {
      faqData.faq.map((data) => (
        <details>
          <summary>
            <span>
              {data.question}
              <PlusIcon />
            </span>
          </summary>
          <div class="answer">
            <p>{data.answer}</p>
          </div>
        </details>
      ))
    }
    </div>
   
  </div>
</section>

<style>
  @layer components {
    header {
      text-align: center;
      color: var(--color-black);
      margin-inline: var(--space-m);
      > * + * {
        margin-top: var(--flow-space, 0.5rlh);
      }

      > span {
        font-family: var(--font-body);
        font-size: var(--fs-0);
        text-transform: uppercase;
        letter-spacing: 14.5%;
      }
      > h2 {
        font-size: var(--fs-5);
        font-weight: 700;
        --flow-space: var(--space-2xs-xs);
        line-height: var(--text-lh);
      }
    }

    section {
      padding-block: var(--space-3xl);
      background: var(--color-white-alt);
      border-radius: var(--radius-l);
    }
    .faqContainer {
      max-width: 725px;
      margin-inline: auto;
    }
    .faqWrapper {
      margin-inline: var(--space-m);
    }

    details {
      border-bottom: 1px solid #dadada;

      &[open] {
        --r: z 90deg;
      }

      @media (prefers-reduced-motion: no-preference) {
        @supports (interpolate-size: allow-keywords) {
          interpolate-size: allow-keywords;
        }

        /* Following is taken from: https://nerdy.dev/open-and-close-transitions-for-the-details-element */
        @supports selector(::details-content) {
          &::details-content {
            opacity: 0;
            block-size: 0;
            overflow-y: clip;
            transition:
              content-visibility 1s allow-discrete,
              opacity 1s,
              block-size 1s;
          }

          &[open]::details-content {
            opacity: 1;
            block-size: calc-size(auto, size);
            @supports not (block-size: calc-size(auto, size)) {
              block-size: auto;
            }
          }
        }
      }

      @media (prefers-reduced-motion: reduce) {
        /* For the icon animations */
        > * {
          transition: 0s all;
        }
      }

      summary {
        font-weight: 700;
        color: var(--color-black);
        text-wrap: revert;
        user-select: none;
        cursor: pointer;

        &::marker,
        &::-webkit-details-marker {
          content: "";
          display: none;
        }

        span {
          border: none;
          text-align: start;
          padding: 0;
          inline-size: 100%;
          padding-block: var(--space-m);
          display: flex;
          gap: var(--space-m);
          justify-content: space-between;

          svg {
            inline-size: auto;
            height: 1lh;
            flex-shrink: 0;
          }
        }
      }

      .answer {
        color: var(--color-text-gray);

        padding-block-end: var(--space-m);

      }
    }
  }
</style>
